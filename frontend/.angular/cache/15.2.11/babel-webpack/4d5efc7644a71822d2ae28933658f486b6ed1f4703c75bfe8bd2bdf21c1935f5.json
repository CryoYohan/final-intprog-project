{"ast":null,"code":"export function appInitializer(accountService) {\n  return () => new Promise(resolve => {\n    // Check if we have a stored account first\n    const account = accountService.accountValue;\n    if (!account) {\n      // No stored account, just resolve\n      resolve();\n      return;\n    }\n    // Check if token is valid before attempting refresh\n    if (!accountService.isTokenValid(account)) {\n      // attempt to refresh token on app start up to auto authenticate\n      accountService.refreshToken().subscribe({\n        next: () => {\n          console.log('Token refreshed successfully during app initialization');\n          resolve();\n        },\n        error: error => {\n          console.error('Token refresh failed during app initialization:', error);\n          // Clear any stored data to ensure clean state\n          accountService.clearAccountData();\n          resolve();\n        }\n      });\n    } else {\n      // Token is still valid, no need to refresh\n      console.log('Token is still valid during app initialization');\n      resolve();\n    }\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}