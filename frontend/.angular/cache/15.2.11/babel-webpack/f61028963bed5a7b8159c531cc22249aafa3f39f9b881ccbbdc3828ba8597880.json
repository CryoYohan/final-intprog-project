{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/_services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction ListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelement(1, \"span\", 5);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_table_3_tr_9_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 16);\n  }\n}\nfunction ListComponent_table_3_tr_9_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_table_3_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 12)(6, \"a\", 13);\n    i0.ɵɵtext(7, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_3_tr_9_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const department_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.deleteDepartment(department_r4.id));\n    });\n    i0.ɵɵtemplate(9, ListComponent_table_3_tr_9_span_9_Template, 1, 0, \"span\", 15);\n    i0.ɵɵtemplate(10, ListComponent_table_3_tr_9_span_10_Template, 2, 0, \"span\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const department_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(department_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(department_r4.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"edit/\", department_r4.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", department_r4.isDeleting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", department_r4.isDeleting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !department_r4.isDeleting);\n  }\n}\nfunction ListComponent_table_3_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 17)(2, \"span\", 18);\n    i0.ɵɵtext(3, \"No departments found\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ListComponent_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 6)(1, \"thead\")(2, \"tr\")(3, \"th\", 7);\n    i0.ɵɵtext(4, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 8);\n    i0.ɵɵtext(6, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"th\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"tbody\");\n    i0.ɵɵtemplate(9, ListComponent_table_3_tr_9_Template, 11, 6, \"tr\", 10);\n    i0.ɵɵtemplate(10, ListComponent_table_3_tr_10_Template, 4, 0, \"tr\", 11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.departments);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.departments.length === 0);\n  }\n}\nexport let ListComponent = /*#__PURE__*/(() => {\n  class ListComponent {\n    constructor(departmentService, alertService) {\n      this.departmentService = departmentService;\n      this.alertService = alertService;\n      this.departments = null;\n      this.departmentToDelete = null;\n      this.deleteModal = null;\n    }\n    ngOnInit() {\n      this.departmentService.getAll().pipe(first()).subscribe(departments => this.departments = departments);\n    }\n    openDeleteModal(department) {\n      this.departmentToDelete = department;\n      // Initialize modal if not already done\n      if (!this.deleteModal) {\n        const modalElement = document.getElementById('deleteConfirmationModal');\n        if (modalElement) {\n          this.deleteModal = new bootstrap.Modal(modalElement);\n        }\n      }\n      // Show the modal\n      if (this.deleteModal) {\n        this.deleteModal.show();\n      }\n    }\n    confirmDelete() {\n      if (!this.departmentToDelete) return;\n      const department = this.departmentToDelete;\n      department.isDeleting = true;\n      this.departmentService.delete(department.id).pipe(first()).subscribe({\n        next: () => {\n          this.departments = this.departments.filter(x => x.id !== department.id);\n          this.alertService.success('Department deleted successfully');\n          this.closeDeleteModal();\n        },\n        error: error => {\n          this.alertService.error(error);\n          department.isDeleting = false;\n          this.closeDeleteModal();\n        }\n      });\n    }\n    closeDeleteModal() {\n      if (this.deleteModal) {\n        this.deleteModal.hide();\n      }\n      this.departmentToDelete = null;\n    }\n  }\n  ListComponent.ɵfac = function ListComponent_Factory(t) {\n    return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.DepartmentService), i0.ɵɵdirectiveInject(i1.AlertService));\n  };\n  ListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListComponent,\n    selectors: [[\"ng-component\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"card\"], [1, \"card-body\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"table table-striped\", 4, \"ngIf\"], [1, \"text-center\"], [1, \"spinner-border\", \"spinner-border-lg\", \"align-center\"], [1, \"table\", \"table-striped\"], [2, \"width\", \"30%\"], [2, \"width\", \"50%\"], [2, \"width\", \"20%\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [2, \"white-space\", \"nowrap\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"me-1\", 3, \"routerLink\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", \"btn-delete-department\", 3, \"disabled\", \"click\"], [\"class\", \"spinner-border spinner-border-sm\", 4, \"ngIf\"], [1, \"spinner-border\", \"spinner-border-sm\"], [\"colspan\", \"3\", 1, \"text-center\"], [1, \"text-muted\"]],\n    template: function ListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, ListComponent_div_2_Template, 2, 0, \"div\", 2);\n        i0.ɵɵtemplate(3, ListComponent_table_3_Template, 11, 2, \"table\", 3);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.departments);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.departments);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink],\n    styles: [\".modal-backdrop[_ngcontent-%COMP%] {\\n            opacity: 0.5;\\n        }\\n        .modal-header[_ngcontent-%COMP%] {\\n            background-color: #f8f9fa;\\n            border-bottom: 1px solid #e9ecef;\\n        }\\n        .modal-footer[_ngcontent-%COMP%] {\\n            border-top: 1px solid #e9ecef;\\n        }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGVwYXJ0bWVudHMvbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUNRO1lBQ0ksWUFBWTtRQUNoQjtRQUNBO1lBQ0kseUJBQXlCO1lBQ3pCLGdDQUFnQztRQUNwQztRQUNBO1lBQ0ksNkJBQTZCO1FBQ2pDIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgIC5tb2RhbC1iYWNrZHJvcCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgIH1cbiAgICAgICAgLm1vZGFsLWhlYWRlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlOWVjZWY7XG4gICAgICAgIH1cbiAgICAgICAgLm1vZGFsLWZvb3RlciB7XG4gICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2U5ZWNlZjtcbiAgICAgICAgfVxuICAgICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n  return ListComponent;\n})();","map":{"version":3,"mappings":"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","names":["first","i0","ListComponent","constructor","departmentService","alertService","ngOnInit","getAll","pipe","subscribe","departments","openDeleteModal","department","departmentToDelete","deleteModal","modalElement","document","getElementById","bootstrap","Modal","show","confirmDelete","isDeleting","delete","id","next","filter","x","success","closeDeleteModal","error","hide","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\JiM\\School\\3rd Year\\2nd Semester\\SUBJECTS\\IT-INTPROG32\\Coding (INTPROG32)\\Final\\project3 (cursor)\\frontend\\src\\app\\departments\\list.component.ts","D:\\JiM\\School\\3rd Year\\2nd Semester\\SUBJECTS\\IT-INTPROG32\\Coding (INTPROG32)\\Final\\project3 (cursor)\\frontend\\src\\app\\departments\\list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { first } from 'rxjs/operators';\r\n\r\nimport { DepartmentService, AlertService } from '@app/_services';\r\ndeclare var bootstrap: any; // For Bootstrap modals\r\n\r\n@Component({ \r\n    templateUrl: 'list.component.html',\r\n    styles: [`\r\n        .modal-backdrop {\r\n            opacity: 0.5;\r\n        }\r\n        .modal-header {\r\n            background-color: #f8f9fa;\r\n            border-bottom: 1px solid #e9ecef;\r\n        }\r\n        .modal-footer {\r\n            border-top: 1px solid #e9ecef;\r\n        }\r\n    `]\r\n})\r\nexport class ListComponent implements OnInit {\r\n    departments = null;\r\n    departmentToDelete = null;\r\n    deleteModal = null;\r\n\r\n    constructor(\r\n        private departmentService: DepartmentService,\r\n        private alertService: AlertService\r\n    ) {}\r\n\r\n    ngOnInit() {\r\n        this.departmentService.getAll()\r\n            .pipe(first())\r\n            .subscribe(departments => this.departments = departments);\r\n    }\r\n\r\n    openDeleteModal(department) {\r\n        this.departmentToDelete = department;\r\n        // Initialize modal if not already done\r\n        if (!this.deleteModal) {\r\n            const modalElement = document.getElementById('deleteConfirmationModal');\r\n            if (modalElement) {\r\n                this.deleteModal = new bootstrap.Modal(modalElement);\r\n            }\r\n        }\r\n        \r\n        // Show the modal\r\n        if (this.deleteModal) {\r\n            this.deleteModal.show();\r\n        }\r\n    }\r\n\r\n    confirmDelete() {\r\n        if (!this.departmentToDelete) return;\r\n        \r\n        const department = this.departmentToDelete;\r\n        department.isDeleting = true;\r\n\r\n        this.departmentService.delete(department.id)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.departments = this.departments.filter(x => x.id !== department.id);\r\n                    this.alertService.success('Department deleted successfully');\r\n                    this.closeDeleteModal();\r\n                },\r\n                error: error => {\r\n                    this.alertService.error(error);\r\n                    department.isDeleting = false;\r\n                    this.closeDeleteModal();\r\n                }\r\n            });\r\n    }\r\n\r\n    closeDeleteModal() {\r\n        if (this.deleteModal) {\r\n            this.deleteModal.hide();\r\n        }\r\n        this.departmentToDelete = null;\r\n    }\r\n} ","<div class=\"card\">\r\n    <div class=\"card-body\">\r\n        <div *ngIf=\"!departments\" class=\"text-center\">\r\n            <span class=\"spinner-border spinner-border-lg align-center\"></span>\r\n        </div>\r\n        <table *ngIf=\"departments\" class=\"table table-striped\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"width: 30%\">Name</th>\r\n                    <th style=\"width: 50%\">Description</th>\r\n                    <th style=\"width: 20%\"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let department of departments\">\r\n                    <td>{{department.name}}</td>\r\n                    <td>{{department.description}}</td>\r\n                    <td style=\"white-space: nowrap\">\r\n                        <a routerLink=\"edit/{{department.id}}\" class=\"btn btn-sm btn-primary me-1\">Edit</a>\r\n                        <button (click)=\"deleteDepartment(department.id)\" class=\"btn btn-sm btn-danger btn-delete-department\"\r\n                            [disabled]=\"department.isDeleting\">\r\n                            <span *ngIf=\"department.isDeleting\" class=\"spinner-border spinner-border-sm\"></span>\r\n                            <span *ngIf=\"!department.isDeleting\">Delete</span>\r\n                        </button>\r\n                    </td>\r\n                </tr>\r\n                <tr *ngIf=\"departments.length === 0\">\r\n                    <td colspan=\"3\" class=\"text-center\">\r\n                        <span class=\"text-muted\">No departments found</span>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div> "]},"metadata":{},"sourceType":"module","externalDependencies":[]}