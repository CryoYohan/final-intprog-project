<h1>View Workflow</h1>

<div *ngIf="loading" class="text-center">
    <span class="spinner-border spinner-border-lg align-center"></span>
</div>

<div *ngIf="!loading && workflow" class="card">
    <div class="card-body">
        <div class="row mb-3">
            <div class="col-md-6">
                <p><strong>Type:</strong> {{workflow.type}}</p>
                <p><strong>Status:</strong> 
                    <span class="badge" [ngClass]="{
                        'bg-warning': workflow.status === 'Pending',
                        'bg-info': workflow.status === 'InProgress',
                        'bg-success': workflow.status === 'Completed',
                        'bg-danger': workflow.status === 'Rejected'
                    }">{{workflow.status}}</span>
                </p>
            </div>
            <div class="col-md-6">
                <p><strong>Employee:</strong> 
                    <span *ngIf="employee">
                        {{employee.account?.firstName}} {{employee.account?.lastName}}
                    </span>
                </p>
                <p><strong>Created:</strong> {{workflow.createdDate | date:'medium'}}</p>
                <p><strong>Last Modified:</strong> {{workflow.lastModifiedDate | date:'medium'}}</p>
            </div>
        </div>

        <div class="mb-3">
            <h4>Task Details</h4>
            <p><strong>Task:</strong> {{workflow.details.task}}</p>
            <p *ngIf="workflow.details.additionalInfo">
                <strong>Additional Information:</strong><br>
                {{workflow.details.additionalInfo}}
            </p>
        </div>

        <div class="border-top pt-3">
            <button *ngIf="isAdmin" (click)="deleteWorkflow()" class="btn btn-danger me-2" [disabled]="loading">
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>
                Delete Workflow
            </button>
            <a routerLink="/workflows" [queryParams]="{employeeId: employeeId}" class="btn btn-link">Back to List</a>
        </div>
    </div>
</div>

<div *ngIf="!loading && !workflow" class="alert alert-danger">
    Workflow not found.
</div> 